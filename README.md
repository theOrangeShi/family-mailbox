# 家庭留言箱

一个 Android 应用，用于家庭成员之间的通讯。

## 功能特点

## 微信的问题

**1. 无隐私 (Lack of Privacy)**
- 微信会收集大量的用户数据，包括个人信息、联系人、位置数据、甚至支付交易细节等
- 非端到端加密: 微信的消息传输虽然有加密，但缺乏像Signal或WhatsApp那样的**端到端加密**

**2. 内容审查和监控**
- 研究表明，微信平台对聊天内容、图片、文件等进行内容审查和政治监控

**3. 烦人的弹窗消息**（Annoying pop-up message）
- 消息泛滥: 微信集成了聊天、公众号、小程序、朋友圈、支付等多种功能
- 难以完全静音: 即使关闭了部分通知，仍难以完全避免所有不必要的"弹窗"或红点提醒

## 本APP特点

1. **完全干净**，无公众号、小程序、朋友圈
2. **不受潜在监控**
3. **无弹窗和通知**
4. **静默存储**，发送的留言不会发送任何提醒，只有在打开软件的时候才能接收到留言
5. **无时间戳**，发送的留言不会显示时间
6. **无发送人显示**，仅作为家人间共享
7. **无发送时间显示**，保留发送人的隐私
8. **本项目为github开源项目**，任何人均可部署并进行自定义

## 使用方法

1. 在底部输入框输入文字（可选）
2. 点击相机图标选择图片（可选）
3. 点击上传图标选择文件（可选）
4. 点击发送按钮即可
5. 所有留言会显示在公共区域

## 构建说明
# 家庭留言箱配置指南

## 📝 编译前配置

在编译 APK 之前，您需要修改配置文件以适配您的家庭环境。

### 1. 打开配置文件

编辑文件：`app/src/main/res/values/config.xml`

### 2. 配置服务器地址

将 `default_server_url` 修改为您的服务器地址：

```xml
<!-- 方式1: 使用域名（推荐，需要配置HTTPS） -->
<string name="default_server_url">https://your-domain.com</string>

<!-- 方式2: 使用IP地址和端口 -->
<string name="default_server_url">http://192.168.1.100:5000</string>

<!-- 方式3: 不使用服务器同步（本地模式）(可用于调试) -->
<string name="default_server_url"></string>
```

### 3. 配置家庭成员名单

在 `family_members` 中添加您的家庭成员姓名，用逗号分隔：

```xml
<string name="family_members">爸爸,妈妈,儿子,女儿,爷爷,奶奶</string>
```

**注意**：
- 姓名需要**完全匹配**才能连接到服务器
- 姓名区分大小写
- 不在名单中的用户将使用本地模式，消息不会同步


## 📱 用户首次使用流程

### 启用姓名验证时（`enable_name_verification = true`）

1. **首次打开应用** → 显示欢迎界面
2. **输入姓名** → 用户输入自己的姓名
3. **验证姓名**：
   - ✅ **姓名在白名单中** → 自动连接到预配置的服务器，消息云端同步
   - ❌ **姓名不在白名单中** → 连接失败，无法与服务器通讯


## 🔧 配置示例

### 示例 1：私密家庭使用（推荐）

```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- 使用您的服务器地址 -->
    <string name="default_server_url">https://family.example.com</string>
    
    <!-- 只有这4个家庭成员可以同步 -->
    <string name="family_members">张三,李四,王五,赵六</string>
    
    <!-- 启用验证 -->
    <bool name="enable_name_verification">true</bool>
</resources>
```

**效果**：
- 张三、李四、王五、赵六输入姓名后自动连接服务器
- 其他人（如"小明"）输入姓名后只能使用本地模式
- 保护隐私，防止非家庭成员访问


### 示例 2：纯本地模式（调试专用）

```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- 留空表示不使用服务器 -->
    <string name="default_server_url"></string>
    
    <string name="family_members"></string>
    
    <bool name="enable_name_verification">true</bool>
</resources>
```




###  添加新成员

如果需要添加新的家庭成员：
1. 修改 `config.xml` 中的 `family_members`
2. 重新编译 APK
3. 分发新的 APK 给所有人（或只给新成员）

## ⚠️ 重要提示

1. **服务器地址必须正确**：确保服务器已部署并可访问
2. **HTTPS 推荐**：使用 HTTPS 保护数据传输安全
3. **姓名匹配**：姓名必须与配置文件中的完全一致（区分大小写）
4. **备份重要**：定期备份服务器数据
5. **隐私保护**：不要将 APK 分发给非家庭成员

## 🆘 故障排除

### 问题：输入姓名后没有连接到服务器

**检查**：
1. 姓名是否在 `family_members` 列表中
2. 姓名拼写是否完全正确（包括大小写）
3. `enable_name_verification` 是否为 `true`
4. 服务器地址是否正确

### 问题：连接服务器失败

**检查**：
1. 服务器是否正在运行
2. 网络连接是否正常
3. 防火墙是否允许访问
4. 服务器地址格式是否正确（包含 `http://` 或 `https://`）



 